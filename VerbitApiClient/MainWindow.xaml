<Window x:Class="VerbitApiClient.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Verbit API - Create New Job" Height="750" Width="900"
        WindowStartupLocation="CenterScreen">
    <DockPanel>
        <!-- Menu Bar -->
        <Menu DockPanel.Dock="Top" Background="#F5F5F5">
            <MenuItem Header="API Features">
                <MenuItem Header="Create New Job" Click="CreateJobMenuItem_Click">
                    <MenuItem.Icon>
                        <TextBlock Text="ðŸ“" FontSize="14"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Create Order (RTMP)" Click="CreateOrderMenuItem_Click">
                    <MenuItem.Icon>
                        <TextBlock Text="ðŸ“º" FontSize="14"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Update Connection Plan" Click="ConnectionPlanMenuItem_Click">
                    <MenuItem.Icon>
                        <TextBlock Text="ðŸ”„" FontSize="14"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="Help">
                <MenuItem Header="API Documentation" Click="DocumentationMenuItem_Click">
                    <MenuItem.Icon>
                        <TextBlock Text="ðŸ“š" FontSize="14"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="About" Click="AboutMenuItem_Click">
                    <MenuItem.Icon>
                        <TextBlock Text="â„¹ï¸" FontSize="14"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
        </Menu>

        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="200"/>
            </Grid.RowDefinitions>

            <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="Verbit API - Create Live Transcription Job" FontSize="24" FontWeight="Bold" Margin="0,0,0,10"/>
            <TextBlock Text="POST /api/job/new" FontSize="14" Foreground="Gray"/>
        </StackPanel>

        <!-- Input Form -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- API Configuration -->
                <GroupBox Header="API Configuration" Margin="0,0,0,15">
                    <StackPanel Margin="10">
                        <TextBlock Text="API Token *" FontWeight="Bold" Margin="0,0,0,5"/>
                        <PasswordBox x:Name="ApiTokenBox" Height="30" Margin="0,0,0,10"/>

                        <Grid Margin="0,0,0,15">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Button x:Name="GenerateBearerTokenButton" Content="Generate Bearer Token" Height="30" Grid.Column="0" Width="180" Click="GenerateBearerTokenButton_Click" Margin="0,0,10,0"/>
                            <TextBlock x:Name="TokenStatusLabel" Text="No bearer token generated" Grid.Column="1" VerticalAlignment="Center" Foreground="Gray" FontStyle="Italic"/>
                        </Grid>
                    </StackPanel>
                </GroupBox>

                <!-- Job Details -->
                <GroupBox Header="Job Details" Margin="0,0,0,15">
                    <StackPanel Margin="10">
                        <TextBlock Text="Job Name *" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBox x:Name="JobNameBox" Height="30" Margin="0,0,0,15" Text="My Live Transcription"/>

                        <TextBlock Text="Client Transaction ID *" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBox x:Name="ClientTransactionIdBox" Height="30" Margin="0,0,0,10" Text=""/>
                        
                        <Grid Margin="0,0,0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ComboBox x:Name="ProfilesCombo" Height="30" Grid.Column="0" Margin="0,0,10,0"/>
                            <Button x:Name="LoadProfilesButton" Content="Load Profiles" Grid.Column="1" Height="30" Click="LoadProfilesButton_Click" />
                        </Grid>
                        <ProgressBar x:Name="ProfilesLoadingBar" Height="6" IsIndeterminate="True" Visibility="Collapsed" Margin="0,2,0,10" />
                    </StackPanel>
                </GroupBox>

                <!-- Input Configuration -->
                <GroupBox Header="Input Configuration" Margin="0,0,0,15">
                    <StackPanel Margin="10">
                        <TextBlock Text="Input Type *" FontWeight="Bold" Margin="0,0,0,5"/>
                        <ComboBox x:Name="InputTypeCombo" Height="30" Margin="0,0,0,15" SelectionChanged="InputTypeCombo_SelectionChanged">
                            <ComboBoxItem Content="web_url" IsSelected="True"/>
                            <ComboBoxItem Content="phone_dial_in"/>
                            <ComboBoxItem Content="rtmp_pull"/>
                            <ComboBoxItem Content="rtmp_push"/>
                        </ComboBox>

                        <TextBlock Text="URL Type (if web_url) *" FontWeight="Bold" Margin="0,0,0,5"/>
                        <ComboBox x:Name="UrlTypeCombo" Height="30" Margin="0,0,0,15">
                            <ComboBoxItem Content="zoom" IsSelected="True"/>
                            <ComboBoxItem Content="teams"/>
                            <ComboBoxItem Content="google_meet"/>
                            <ComboBoxItem Content="generic_url"/>
                        </ComboBox>

                        <TextBlock Text="Connection URL *" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBox x:Name="ConnectionUrlBox" Height="30" Margin="0,0,0,15" Text=""/>

                        <TextBlock Text="Input Language *" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBox x:Name="InputLanguageBox" Height="30" Margin="0,0,0,15" Text="en-US"/>
                    </StackPanel>
                </GroupBox>

                <!-- Schedule Configuration -->
                <GroupBox Header="Schedule Configuration" Margin="0,0,0,15">
                    <StackPanel Margin="10">
                        <TextBlock Text="Start Date and Time *" FontWeight="Bold" Margin="0,0,0,5"/>
                        
                        <Grid Margin="0,0,0,15">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" SharedSizeGroup="Label"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto" SharedSizeGroup="Label"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Date Picker -->
                            <TextBlock Text="Date:" FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,10,0"/>
                            <DatePicker x:Name="StartDatePicker" Grid.Column="1" Height="30" SelectedDateChanged="StartDateTime_Changed"/>
                            
                            <!-- Hour -->
                            <TextBlock Text="Hour:" FontWeight="Bold" Grid.Row="0" Grid.Column="2" VerticalAlignment="Center" Margin="10,0,10,0"/>
                            <TextBox x:Name="StartHourBox" Grid.Row="0" Grid.Column="3" Height="30" Text="12" TextChanged="StartDateTime_Changed"/>
                            
                            <!-- Minute -->
                            <TextBlock Text="Minute:" FontWeight="Bold" Grid.Row="1" Grid.Column="2" VerticalAlignment="Center" Margin="10,5,10,0"/>
                            <TextBox x:Name="StartMinuteBox" Grid.Row="1" Grid.Column="3" Height="30" Text="00" Margin="0,5,0,0" TextChanged="StartDateTime_Changed"/>
                            
                            <!-- Second -->
                            <TextBlock Text="Second:" FontWeight="Bold" Grid.Row="2" Grid.Column="2" VerticalAlignment="Center" Margin="10,5,10,0"/>
                            <TextBox x:Name="StartSecondBox" Grid.Row="2" Grid.Column="3" Height="30" Text="00" Margin="0,5,0,0" TextChanged="StartDateTime_Changed"/>
                        </Grid>
                        
                        <TextBlock Text="Formatted ISO 8601:" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBlock x:Name="StartAtPreviewLabel" Text="Preview: (not set)" FontSize="11" Foreground="DarkBlue" Margin="0,0,0,15" TextWrapping="Wrap"/>
                        <TextBox x:Name="StartAtBox" Height="30" Margin="0,0,0,15" Text="" IsReadOnly="True" Background="WhiteSmoke"/>

                        <TextBlock Text="Timezone *" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBox x:Name="TimezoneBox" Height="30" Margin="0,0,0,15" Text="America/Los_Angeles"/>

                        <TextBlock Text="Max Duration (minutes) *" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBox x:Name="MaxDurationBox" Height="30" Margin="0,0,0,10" Text="15"/>
                    </StackPanel>
                </GroupBox>

                <!-- Output Configuration -->
                <GroupBox Header="Output Configuration" Margin="0,0,0,15">
                    <StackPanel Margin="10">
                        <TextBlock Text="Product Type *" FontWeight="Bold" Margin="0,0,0,5"/>
                        <ComboBox x:Name="ProductTypeCombo" Height="30" Margin="0,0,0,15">
                            <ComboBoxItem Content="captions" IsSelected="True"/>
                            <ComboBoxItem Content="translation"/>
                            <ComboBoxItem Content="interpretation"/>
                        </ComboBox>

                        <TextBlock Text="Tier *" FontWeight="Bold" Margin="0,0,0,5"/>
                        <ComboBox x:Name="TierCombo" Height="30" Margin="0,0,0,15">
                            <ComboBoxItem Content="automatic" IsSelected="True"/>
                            <ComboBoxItem Content="human"/>
                            <ComboBoxItem Content="hybrid"/>
                        </ComboBox>

                        <TextBlock Text="Target Languages (comma-separated) *" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBox x:Name="TargetLanguagesBox" Height="30" Margin="0,0,0,10" Text="en-US"/>
                    </StackPanel>
                </GroupBox>
            </StackPanel>
        </ScrollViewer>

        <!-- Action Buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,15">
            <Button x:Name="ClearButton" Content="Clear Form" Width="100" Height="35" Margin="0,0,10,0" Click="ClearButton_Click"/>
            <Button x:Name="SubmitButton" Content="Create Job" Width="120" Height="35" Background="#007ACC" Foreground="White" FontWeight="Bold" Click="SubmitButton_Click"/>
        </StackPanel>

        <!-- Response and Logging Area -->
        <TabControl Grid.Row="3" Margin="0,0,0,0">
            <TabItem Header="Response">
                <GroupBox Header="Response" Margin="0,0,0,0">
                    <Grid>
                        <TextBox x:Name="ResponseBox" IsReadOnly="True" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto" FontFamily="Consolas" FontSize="12" Padding="10"/>
                    </Grid>
                </GroupBox>
            </TabItem>
            <TabItem Header="Logging">
                <GroupBox Header="Request and Response Logging" Margin="0,0,0,0">
                    <Grid>
                        <TextBox x:Name="LoggingBox" IsReadOnly="True" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto" FontFamily="Consolas" FontSize="12" Padding="10"/>
                    </Grid>
                </GroupBox>
            </TabItem>
        </TabControl>
        <!-- Spinner overlay (appears above all content when visible) -->
        <Grid x:Name="SpinnerOverlay" Grid.RowSpan="4" Visibility="Collapsed" Background="#80000000">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Border HorizontalAlignment="Center" VerticalAlignment="Center" Background="#AAFFFFFF" Padding="20" Width="260" Height="100" CornerRadius="6">
                <StackPanel Orientation="Vertical">
                    <ProgressBar IsIndeterminate="True" Height="18" Margin="0,0,0,10"/>
                    <TextBlock Text="Loading profiles..." HorizontalAlignment="Center" FontWeight="Bold" Foreground="#222"/>
                </StackPanel>
            </Border>
        </Grid>
        </Grid>
    </DockPanel>
</Window>
